quest fisher begin
	state start begin
		when 9009.chat.locale_quest(1301) begin
			npc.open_shop()
			setskin(NOWINDOW)
		end

		when 9009.chat.locale_quest(1309) begin
			say_title(locale_quest(1310))
			say(locale_quest(1311))
		end

		when 9009.take with item.get_vnum() < 27400 or item.get_vnum() > 27590 begin
			say_title(locale_quest(1310))
			say(locale_quest(1312))
		end

		when 9009.take with item.get_vnum() == 27590 begin
			say_title(locale_quest(1310))
			say(locale_quest(1313))
		end

		when 9009.take with item.get_vnum() >= 27400 and item.get_vnum() < 27590 and item.get_socket(0) != item.get_value(2) begin
			say_title(locale_quest(1310))
			say(locale_quest(1314))
		end

		when 9009.take with item.get_vnum() >= 27400 and item.get_vnum() < 27590 and item.get_socket(0) == item.get_value(2) begin
			say_title(locale_quest(1310))
			say(locale_quest(1315))
			say(string.format(locale_quest(1316), item.get_value(0) / 10))
			say(locale_quest(1302))
			say(string.format(locale_quest(1303), 100 - item.get_value(3)))
			say(locale_quest(1304))

			local s = select(locale_quest(1475), locale_quest(1476))
			if s == 1 then
				local f = __fish_real_refine_rod(item.get_cell())
				if f == 2 then
					say_title(locale_quest(1310))
					say(locale_quest(1305))
				elseif f == 1 then
					say_title(locale_quest(1310))
					say(locale_quest(1306))
				else
					say(locale_quest(1307))
				end
			else
				say_title(locale_quest(1310))
				say(locale_quest(1308))
			end
		end
	end
end
