local vnum = item . get_vnum ( ) 
local upgrade_list = { 
[ 11299 ] = 20000 , 
[ 11499 ] = 20250 , 
[ 11699 ] = 20500 , 
[ 11899 ] = 20750 , 
} 
local material_list = { 
{ 
[ "vnum" ] = 70031 , 
[ "count" ] = 3 , 
} , 
{ 
[ "vnum" ] = 51001 , 
[ "count" ] = 100 , 
} , 
{ 
[ "vnum" ] = 25040 , 
[ "count" ] = 2 , 
} , 
} 
local can_change = true 
if 11299 == vnum or 11499 == vnum or 11699 == vnum or 11899 == vnum then 
say_title ( mob_name ( 20378 ) ) 
say ( string . format ( locale_quest ( 711 ) , item_name ( vnum ) ) ) 
say_title ( locale_quest ( 712 ) ) 
for i , material in ipairs ( material_list ) begin 
say ( "  " .. item_name ( material . vnum ) .. " " .. locale_quest ( 2456 ) .. material . count .. " " .. locale_quest ( 2455 ) .. "" ) 
can_change = can_change and ( material . count <= pc . count_item ( material . vnum ) ) 
end 
say ( "" ) 
say_title ( locale_quest ( 713 ) ) 
say_item_vnum ( upgrade_list [ vnum ] ) 
say ( "" ) 
wait ( ) 
if true == can_change then 
say_title ( mob_name ( 20378 ) ) 
say ( string . format ( locale_quest ( 714 ) , item_name ( vnum ) , item_name ( upgrade_list [ vnum ] ) ) ) 
say_reward ( locale_quest ( 4297 ) ) 
say_item_vnum ( upgrade_list [ vnum ] ) 
say ( "" ) 
local s = select ( locale_quest ( 4473 ) , locale_quest ( 3418 ) ) 
if s == 1 then 
if not item . is_available ( ) then return end 
item . copy_and_give_before_remove ( upgrade_list [ vnum ] ) 
for i , material in ipairs ( material_list ) begin 
pc . remove_item ( material . vnum , material . count ) 
end 
end 
return 
else 
say_title ( mob_name ( 20378 ) ) 
say ( locale_quest ( 715 ) ) 
return 
end 
end 
